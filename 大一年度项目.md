#  大一年度项目总结与反思
### 前言：
科创结题评审最终结束了，觉得很糟糕，也很沮丧。结果出来之后，意外的获得了一等奖，并且得分还是第二名。感觉很好，也说明我们项目还是很有发展潜力的，值得继续进行下去。  
###  正文：
起初，只是打算做一个植物周围环境的监测提醒系统。利用串口通信，项目进行的很顺利，后来觉得提高档次，利用无线通信，并且加一个控制调节系统。就开始了长期的探索历程。    

暑假的时候，我购买了一个arduino套件，开始了arduino的学习。当时觉得arduino拥有强大的库函数，相对于51，stm32更容易掌握，后来发现它的限制也很多，比如电流大小，有利有弊吧。  

开始进行的比较顺利，利用套件提供的代码，顺利的利用DHT11温湿度传感器测出了温湿度，并且从arduino的自带串口上观察到了数据。之后发现，串口调试助手都差不多，arduino自带的串口并没有明显优势。也考虑过用LM35温度传感器，因为他的测量灵敏度不够，并且没有库函数，需要自己设计一个转化公式（把电压模拟值转换成实际温度值），十分麻烦，就放弃了。 
 
至于光照，就选取了光敏电阻，测出模拟值（光敏电阻两端电压转化成的数值）。开始犯了一个错误，把线直接接到电源两端，所以无论怎么调试，改变光照（电阻阻值），电压值都是5V.然后接了一个10K的陶瓷电阻，把模拟值接收端接在电阻与光敏电阻之间，才解决了问题。因为光照大小的标准并没有统一，没有一种通用的标准，我们就没有设计转换公式，而是直接采取了电压模拟值。  

由于UNO核心板接口不够，加了一个扩展板，至此，实现了串口通信，成功地检测到了光照，温度，湿度数据。  

中期之后，决定做得更高大尚一点，采用无线远程通信。有两种选择，WiFi和蓝牙。本来是倾向于蓝牙模块的。因为恰好有WiFi模块，我又想团队同时实现两种通信，于是就开始了对esp8266WiFi模块的探索。（详情可参阅拙作 &nbsp; Esp8266模块）过程很艰辛，原因也很简单，没有例程可以参考，一切都要靠自己。之前的串口通讯只需要把模块各自的例程整合一下，略作调整就可以了。  

从四月初假期到五月初，这一个月的时间里，我都在不断地尝试。同时，也发现了网上资源的不足，根本找不到我需要的东西。一个月中，我经常想要放弃，但是又不甘心这么失败了。我是想把WiFi通信作为杀手锏，一个大后招。留一手一贯是我的风格，我一定会保持自己的多重选择，不会孤注一掷。也许是缺乏冒险精神吧，不过这样保守一点还是有选择余地的。  

五月初，一次实验中，WiFi模块连上了我的手机热点，我十分激动。继续实验，几十分钟后，我的电脑监测到了WiFi的数据。抑制不住心中的狂喜，放下手头的工作，出去散步了。心中有了一种解脱感，如释负重，终于把一件毫无头绪的事情解决了后来想写篇文章总结一下经验，教训，于是就出现了Esp8266模块那篇文章。WiFi通信，让我真正感受到了实验的艰难，之前的数据收集。做的主要是整合工作，很轻松。探索一个对我来说是新的领域，当真十分不易。  

WiFi通信做好之后，有一些同学遇到相关方面不懂的问题，会来问我。多了一种探索到的知识被应用的快感，同时也增强了我完善WiFi通信文章的决心。  

WIFI通信很快就成熟了，因为某些原因，团队的科创项目停滞了相当长的一段时间。由于蓝牙项目并没有进展，不得不全面使用WIFI模块。WIFI数据发送很快就解决了，接下来要做的就是数据的接收以及控制板对数据的处理及反应。起初，我认为这个项目很简单，不就是接个数据吗？想做的话，很容易的事。可是，做此来，才发现当中的难度。数据发过去没问题，可是怎么接收？读取根本接收不到数据。尝试用字符接收，一次接收一个字符，根本无法实现三个处理器的同时控制。查阅了arduino相关书籍后发现，可以接受Int型数据。一下子，感觉前方道路光明了许多。后来发现，可以用parseFloat型接收，成为八位数据。  
为了保证同时性，减少数据的发送次数，我们采取了一个三三二的编码方法。一次发送八位数，前三位，中间三位，后两位分别对应一个处理器。在硬件程序上，设计了数据的拆分方法，以便快速处理数据。并且，为了检验准确性，设计了一个反馈机制。把拆分后的数据再加上一些英文发回来。从仿真来说，这个方法很好，然而，在之后，差点导致一个大麻烦。  

解决了编码问题，数据的收发也解决了。剩下的，就是把整个系统完整的走一遍的问题了。答辩前两天的下午，开始完整的测试。发现了一个令我大跌眼镜的问题。明明输出高电平，可是水泵两端的电压只有零点几伏，根本带不起来水泵。开始以为是水泵电阻太小，以至导线分压太多。减少了导线，还是不行。心中说不出的苦恼，感觉这么多天的努力就要白费了，想到了之后自以为丢人的场面。那周又非常忙，每天都在第二天休息，身心俱疲。后来查阅资料，发现是arduino对模拟输出电流有限制，20mA。顿时呆住了，20mA，能够干什么，最多点亮一两个LED吧。 

接着，又想起扩大电流，因为，已经没有了选择，时间太晚了，只能走下去了。百度一搜arduino扩流，发现了很多网页，发现三极管扩流很常用。很快，想起了以前看的一个视频，上面用了一种芯片，使得直流电机利用模拟输出可以工作。找出了视频一看，似乎真的可以，像发现了新大陆一样，立即开始了电路组接。结果，发现电流没有被扩大，这回是真的绝望了。但又感觉不对劲，网上都说三极管是可以扩流的，为什么ULN2003（内含七个三极管）不可以呢？再一次向视频寻求帮助，发现，原来是电路少接了一根线，需要一个5V电压刺激三极管，而我把这给忽略了。终于，电机转动了，我如释负重的叹了一口气，面子保住了，可以“装”一波了！







